---
import Layout from '../../layouts/Layout.astro';
import Env from "zhi-env";
import ZhiUtil from "../../utils/zhiUtil";

const {slug} = Astro.params;

const env = new Env(import.meta.env)
const zhiSdk = ZhiUtil.zhiSdk(env)
const blogApi = zhiSdk.blogApi
const postid = slug.includes(".html") ? slug.replace(".html", "") : slug
const post = await blogApi.getPost(postid)

// The getStaticPaths() is required for static Astro sites.
// If using SSR, you will not need this function.
// export async function getStaticPaths() {
//   const env = new Env(import.meta.env)
//   const zhiSdk = ZhiUtil.zhiSdk(env)
//   const blogApi = zhiSdk.blogApi
//   const posts = await blogApi.getRecentPosts(10)
//
//   return posts.map((post:any) => ({
//     params: { slug: post.postid },
//     props: { post: post },
//   }));
// }
---

<head>
    <meta charset="UTF-8"/>
</head>

<Layout title="Welcome to Astro.">
    <article>
        <h1 set:html={post.title}/>
        <Fragment set:html={post.description}/>
    </article>
</Layout>
